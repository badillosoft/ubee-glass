<template data-name="text-editable">
    <style>
        [data-name="text-editable"] {
            display: flex;
            justify-content: stretch;
            align-items: stretch;
            background-color: whitesmoke;
            box-sizing: border-box;
        }
        [data-name="text-editable"] span {
            flex-grow: 1;
            font-size: 24px;
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            /* background-color: aliceblue; */
            color: cornflowerblue;
            padding: 10px;
            box-sizing: border-box;
            border-bottom: 1px solid transparent;
        }
        [data-name="text-editable"] input {
            flex-grow: 1;
            outline: none;
            appearance: none;
            padding: 0px;
            border: 0px solid transparent;
            font-size: 24px;
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            /* background-color: tomato; */
            color: hotpink;
            background-color: transparent;
            padding: 10px;
            box-sizing: border-box;
            border-bottom: 1px solid transparent;
        }
        [data-name="text-editable"] input:focus {
            border-bottom: 1px solid #333333;
            box-sizing: border-box;
        }
    </style>
    <div hidden
        data-listen-of-editable="parent.dataset.readonly = 'false'"
        data-listen-at-readonly="
            parent.dataset.readonly = 'true';
            alert('Escritura deshabilitada');
        "
        data-listen-at-edit-in-show="
            parent.dataset.readonly === 'true' || fire(parent, '@edit:open')
        "
    ></div>
    <span tabindex="0"
        data-event-click="fire(parent, '@edit:show')"
        data-event-focus="fire(parent, '@edit:show')"
        data-listen-at-edit-in-open="self.hidden = true"
        data-listen-at-edit-in-close="
            self.innerText = parent.dataset.value || 'Escribe algo...';
            self.hidden = false;
        "
        >Escribe algo...</span>
    <input type="text" placeholder="Escribe algo..." hidden
        data-event-keyup="
            parent.dataset.value = self.value || ''
            if (event.key === 'Escape') {
                fire(parent, '@edit:close');
            }
            if (event.key === 'Enter') {
                fire(parent, '@edit:close');
                setTimeout(() => {
                    window.dispatchEvent(new KeyboardEvent('keyup', {
                        type: 'keyup',
                        bubbles: true,
                        cancelBubble: false,
                        cancelable: true,
                        key: 'Tab',
                        keyCode: 9,
                        charCode: 0,
                        code: 'Tab',
                    }));
                }, 100);
            }
        "
        data-event-blur="fire(parent, '@edit:close')"
        data-listen-at-edit-in-close="self.hidden = true"
        data-listen-at-edit-in-open="
            self.hidden = false;
            self.focus();
            self.select();
        "
    >
</template>