<template data-hidden="true" data-name="button">
    <button
        data-listen-in-update="self.innerText = `Hello world ${Math.random()}`"
        data-listen-at-show="alert('hi')"
        data-event-click="alert(self.innerText)"
    >Hello world</button>
</template>

<template data-name="image" >
    <style>
        [data-name="image"] img {
            border-radius: 50%;
            border: 4px solid blue;
        }

        [data-name="image"] img:hover {
            border: 4px solid red;
        }
        
        [data-name="image"] img.big {
            border-radius: 0%;
        }
    </style>
    <div hidden
        data-listen-in-update="
            document.body.appendChild(parent);
            parent.dataset.shown = 'hide';
        "
        data-listen-at-show="parent.dataset.shown = 'show'"
        data-listen-at-hide="parent.dataset.shown = 'hide'"
    ></div>
    <img src="http://placekitten.com/300"
        data-listen-in-update="localStorage.setItem('ABC', JSON.stringify(self.dataset))"
        data-event-mouseover="self.classList.add('big');"
        data-event-mouseout="self.classList.remove('big');"
        data-event-click="fire(parent, parent.dataset.shown === 'hide' ? '@show' : '@hide')"
    >
    <span hidden
        data-listen-at-show="self.hidden = false"
        data-listen-at-hide="self.hidden = true"
        data-event-click="
            load('/ui/image.html').then(component => parent.appendChild(component))
        "
        data-event-clickx="
            const component = document.querySelector('[data-name=\'button\']').cloneNode(true);
            component.hidden = false;
            component.querySelectorAll('*').forEach(child => {
                delete child.dataset.glassEvent;
                delete child.dataset.glassListen;
            });
            parent.appendChild(component);
            ubee(component);
        "
    >Hola estoy oculto</span>
    <input type="checkbox" checked
        data-listen-at-show="self.checked = false"
        data-listen-at-hide="self.checked = true"
        data-event-change="fire(parent, self.checked ? '@hide' : '@show')"
    >
</template>