<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Lab</title>
</head>
<body>
    <div data-glass="app">
        <div data-debug="false">
            <datalist data-extend="ubee-watch" data-uri="http://189.213.198.6:3000" data-debug="false">
                <option data-ambient="mbpos" data-key="abc123"></option>
            </datalist>
        </div>
        <div data-component="cliente">
            <input type="text" data-wall-on-datalist="self.setAttribute('list', event.detail);">
            <datalist data-self-on-update-to-wall-on-datalist="
                        self.id = Math.random().toString(32).slice(2);
                        return self.id;" 
                    data-self-on-update="setTimeout(() => {
                                            window.look('mbpos','products');
                                        }, 1000);" 
                    data-root-at-watch-on-state-in-mbpos-on-products-on-response="
                        if (!root.dataset.clients){ 
                            let list = [];
                            let clients =event.detail;
                            clients.map(client=>{
                                let itemlist = {};
                                itemlist.id= client.CLIENTE;
                                itemlist.nombre = client.NOMBRE;
                                list.push(itemlist);
                                let option = document.createElement('option');
                                option.value = itemlist.id;
                                option.textContent = itemlist.nombre;
                                self.appendChild(option);
                            });
                            root.dataset.clients =JSON.stringify(list);  
                        }
            "></datalist>
        </div>
    </div>
    <script src="../lib/ubee-glass-v4.js"></script>
    <script>ubee_glass("app")</script>
    
    <script>


    </script>

</body>

</html>